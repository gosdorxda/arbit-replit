<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Exchange Data Aggregator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Roboto:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1 class="title">Crypto Exchange Aggregator</h1>
                <p class="subtitle">SPOT/USDT Market Data from Multiple Exchanges</p>
            </div>
            <div class="header-controls">
                <button id="font-toggle" class="font-toggle" onclick="toggleFont()" title="Toggle Font">
                    <span class="font-icon">Aa</span>
                </button>
                <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()">
                    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                    </svg>
                </button>
            </div>
        </header>

        <section class="control-panel">
            <div class="button-group">
                <button id="btn-lbank" class="fetch-btn lbank-btn" onclick="fetchData('lbank')">
                    <div class="btn-main">
                        <span class="btn-name">LBANK</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-hashkey" class="fetch-btn hashkey-btn" onclick="fetchData('hashkey')">
                    <div class="btn-main">
                        <span class="btn-name">HashKey</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-biconomy" class="fetch-btn biconomy-btn" onclick="fetchData('biconomy')">
                    <div class="btn-main">
                        <span class="btn-name">Biconomy</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-mexc" class="fetch-btn mexc-btn" onclick="fetchData('mexc')">
                    <div class="btn-main">
                        <span class="btn-name">MEXC</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-bitrue" class="fetch-btn bitrue-btn" onclick="fetchData('bitrue')">
                    <div class="btn-main">
                        <span class="btn-name">Bitrue</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-ascendex" class="fetch-btn ascendex-btn" onclick="fetchData('ascendex')">
                    <div class="btn-main">
                        <span class="btn-name">AscendEX</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-bitmart" class="fetch-btn bitmart-btn" onclick="fetchData('bitmart')">
                    <div class="btn-main">
                        <span class="btn-name">BitMart</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-dextrade" class="fetch-btn dextrade-btn" onclick="fetchData('dextrade')">
                    <div class="btn-main">
                        <span class="btn-name">Dex-Trade</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-poloniex" class="fetch-btn poloniex-btn" onclick="fetchData('poloniex')">
                    <div class="btn-main">
                        <span class="btn-name">Poloniex</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-gateio" class="fetch-btn gateio-btn" onclick="fetchData('gateio')">
                    <div class="btn-main">
                        <span class="btn-name">Gate.io</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-niza" class="fetch-btn niza-btn" onclick="fetchData('niza')">
                    <div class="btn-main">
                        <span class="btn-name">Niza</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-xt" class="fetch-btn xt-btn" onclick="fetchData('xt')">
                    <div class="btn-main">
                        <span class="btn-name">XT.com</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-coinstore" class="fetch-btn coinstore-btn" onclick="fetchData('coinstore')">
                    <div class="btn-main">
                        <span class="btn-name">Coinstore</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-vindax" class="fetch-btn vindax-btn" onclick="fetchData('vindax')">
                    <div class="btn-main">
                        <span class="btn-name">Vindax</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-fameex" class="fetch-btn fameex-btn" onclick="fetchData('fameex')">
                    <div class="btn-main">
                        <span class="btn-name">FameEX</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-bigone" class="fetch-btn bigone-btn" onclick="fetchData('bigone')">
                    <div class="btn-main">
                        <span class="btn-name">BigOne</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
                <button id="btn-p2pb2b" class="fetch-btn p2pb2b-btn" onclick="fetchData('p2pb2b')">
                    <div class="btn-main">
                        <span class="btn-name">P2PB2B</span>
                        <span class="spinner"></span>
                    </div>
                    <div class="btn-status">
                        <span class="btn-time">Never fetched</span>
                        <span class="btn-pairs">0 pairs</span>
                        <span class="btn-list"></span>
                    </div>
                </button>
            </div>
        </section>

        <section class="filter-section">
            <div class="filter-group">
                <div class="filter-item">
                    <label for="exchange-filter">Exchange:</label>
                    <select id="exchange-filter">
                        <option value="">All Exchanges</option>
                        <option value="LBANK" selected>LBANK</option>
                        <option value="HASHKEY">HASHKEY</option>
                        <option value="BICONOMY">BICONOMY</option>
                        <option value="MEXC">MEXC</option>
                        <option value="BITRUE">BITRUE</option>
                        <option value="ASCENDEX">ASCENDEX</option>
                        <option value="BITMART">BITMART</option>
                        <option value="DEXTRADE">DEXTRADE</option>
                        <option value="POLONIEX">POLONIEX</option>
                        <option value="GATEIO">GATEIO</option>
                        <option value="NIZA">NIZA</option>
                        <option value="XT">XT</option>
                        <option value="COINSTORE">COINSTORE</option>
                        <option value="VINDAX">VINDAX</option>
                        <option value="FAMEEX">FAMEEX</option>
                        <option value="BIGONE">BIGONE</option>
                        <option value="P2PB2B">P2PB2B</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label for="list-filter">Filter:</label>
                    <select id="list-filter">
                        <option value="">Semua Data</option>
                        <option value="hide_blacklist">Sembunyikan Blacklist</option>
                        <option value="only_whitelist">Hanya Whitelist</option>
                        <option value="only_blacklist">Hanya Blacklist</option>
                    </select>
                </div>
                <div class="filter-item filter-checkbox">
                    <label class="checkbox-label">
                        <input type="checkbox" id="multi-exchange-filter">
                        <span>Multi-exchange pairs only</span>
                    </label>
                    <span class="pair-stats">
                        <span id="current-pairs">0</span> pairs
                        (<span id="comparable-pairs">0</span> comparable)
                    </span>
                </div>
                <div class="filter-item stats-info">
                    <div class="stat-item">
                        <span class="stat-label">Exchanges:</span>
                        <span class="stat-value" id="total-exchanges">17</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Markets:</span>
                        <span class="stat-value" id="total-markets">0</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="table-section">
            <div class="table-wrapper">
                <table id="ticker-table" class="display" style="width:100%">
                    <thead>
                        <tr>
                            <th class="td-exchange">Exchange</th>
                            <th class="td-symbol">Symbol</th>
                            <th class="td-change">24h Change</th>
                            <th class="td-volume">24h Vol (USD)</th>
                            <th class="td-action">Orderbook</th>
                            <th class="td-price">Price</th>
                            <th class="td-peer">Compare (Other Exchange)</th>
                            <th class="td-list">List</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <div id="toast" class="toast"></div>
    </div>

    <div id="orderbook-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Orderbook</h2>
                <button class="modal-close" onclick="closeOrderbookModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="orderbook-header">
                    <span>Price</span>
                    <span>Qty</span>
                    <span>Total</span>
                </div>
                <div class="orderbook-container">
                    <div class="orderbook-side asks">
                        <div id="asks-list" class="orderbook-list"></div>
                    </div>
                    <div id="spread-divider" class="orderbook-divider">−</div>
                    <div class="orderbook-side bids">
                        <div id="bids-list" class="orderbook-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="orderbook-modal2" class="modal modal-secondary">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title2">Orderbook</h2>
                <button class="modal-close" onclick="closeOrderbookModal2()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="orderbook-header">
                    <span>Price</span>
                    <span>Qty</span>
                    <span>Total</span>
                </div>
                <div class="orderbook-container">
                    <div class="orderbook-side asks">
                        <div id="asks-list2" class="orderbook-list"></div>
                    </div>
                    <div id="spread-divider2" class="orderbook-divider">−</div>
                    <div class="orderbook-side bids">
                        <div id="bids-list2" class="orderbook-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}?v={{ range(1000000) | random }}"></script>
</body>
</html>
